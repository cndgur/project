SET DEFINE OFF;

DROP TABLE TB_ROOM CASCADE CONSTRAINTS;
DROP TABLE TB_ROOM_BOOKING CASCADE CONSTRAINTS;
DROP TABLE TB_BUSINESS CASCADE CONSTRAINTS;
DROP TABLE TB_PICTURE CASCADE CONSTRAINTS;
DROP TABLE TB_MEMBER CASCADE CONSTRAINTS;
DROP TABLE TB_REVIEW CASCADE CONSTRAINTS;
DROP TABLE TB_TOUR_PICTURE CASCADE CONSTRAINTS;
DROP TABLE TB_TOUR CASCADE CONSTRAINTS;
DROP TABLE TB_WISHLIST CASCADE CONSTRAINTS;
DROP TABLE TB_RENTCAR CASCADE CONSTRAINTS;
DROP TABLE TB_CAR_BOOKING CASCADE CONSTRAINTS;
DROP TABLE TB_CATEGORY CASCADE CONSTRAINTS;

CREATE TABLE TB_ROOM (
	ROOM_NUM NUMBER NOT NULL,
	ROOM_MAX NUMBER NOT NULL,
	ROOM_NAME VARCHAR2(255) NOT NULL,
	ROOM_PRICE NUMBER NOT NULL,
	CHECKIN VARCHAR2(255) NOT NULL,
	CHECKOUT VARCHAR2(255) NOT NULL,
	ROOM_INFO VARCHAR2(255) NOT NULL,
	BU_ID VARCHAR2(255) NOT NULL,
	PRIMARY KEY (ROOM_NUM)
);

CREATE TABLE TB_ROOM_BOOKING (
	BOOKING_NUM VARCHAR2(255) NOT NULL,
	ROOM_NUM NUMBER NOT NULL,
	ROOM_USER VARCHAR2(255) NOT NULL,
	CHECKIN DATE NOT NULL,
	CHECKOUT DATE NOT NULL,
	STATUS NUMBER NOT NULL,
	PAYMENT VARCHAR2(255) NOT NULL,
	PRICE VARCHAR2(255) NOT NULL,
	FIELD10 VARCHAR2(255) NOT NULL,
	PRIMARY KEY (BOOKING_NUM)
);

CREATE TABLE TB_PICTURE (
	LOCATION VARCHAR2(255) NOT NULL,
	ROOM_NUM NUMBER NULL,
	BU_ID VARCHAR2(255) NULL,
	PRIMARY KEY (LOCATION)
);

CREATE TABLE TB_MEMBER (
    USER_ID VARCHAR2(255) NOT NULL,
    USER_PWD VARCHAR2(255) NOT NULL,
    USER_NAME VARCHAR2(255) NOT NULL,
    EMAIL VARCHAR2(255) NOT NULL,
    TEL VARCHAR2(255) NOT NULL,
    BIRTHDAY VARCHAR2(255),
    GENDER VARCHAR2(2),
    ENROLL_DATE DATE,
    MODIFY_DATE DATE,
    STATUS VARCHAR2(2) DEFAULT 'Y',
	PRIMARY KEY (USER_ID)
);

CREATE TABLE TB_BUSINESS (
	BU_ID VARCHAR2(255) NOT NULL,
    BU_PWD VARCHAR2(255) NOT NULL,
	EMAIL VARCHAR2(255) NOT NULL,
	BU_TEL VARCHAR2(255) NOT NULL,
	BU_ADDRESS VARCHAR2(255) NOT NULL,
	BU_TITLE VARCHAR2(255) NOT NULL,
    ENROLL_DATE DATE,
    MODIFY_DATE DATE,
    STATUS VARCHAR2(2) DEFAULT 'Y',
	PRIMARY KEY (BU_ID)
);

CREATE TABLE TB_REVIEW (
	REV_NUM NUMBER NOT NULL,
	REV_USER VARCHAR2(255) NOT NULL,
	AC_NAME VARCHAR2(255) NOT NULL,
	CONTENT VARCHAR2(255) NOT NULL,
	REVIEW_DATE DATE NOT NULL,
	SCORE NUMBER NOT NULL,
	PRIMARY KEY (REV_NUM)
);

CREATE TABLE TB_TOUR_PICTURE (
	LOCATION VARCHAR2(255) NOT NULL,
	AC_NAME VARCHAR2(255) NOT NULL,
	PRIMARY KEY (LOCATION)
);

CREATE TABLE TB_TOUR (
	AC_NAME VARCHAR2(255) NOT NULL,
	AC_ADDRESS VARCHAR2(255) NOT NULL,
	TR_INFO VARCHAR2(4000) NOT NULL,
	ACT_ID VARCHAR2(255) NOT NULL,
    TR_MAP_INFO VARCHAR2(1000),
	FIELD NUMBER NOT NULL,
	PRIMARY KEY (AC_NAME)
);

CREATE TABLE TB_WISHLIST (
	AC_NAME VARCHAR2(255) NOT NULL,
	WISH_USER VARCHAR2(255) NOT NULL,
	PRIMARY KEY (AC_NAME, WISH_USER)
);

CREATE TABLE TB_RENTCAR (
	CAR_NUM VARCHAR2(255) NOT NULL,
	CAR_ID VARCHAR2(255) NOT NULL,
	CAR_NAME VARCHAR2(255) NOT NULL,
	CAR_PRICE NUMBER NOT NULL,
	CAR_INFO VARCHAR2(255) NULL,
	PRIMARY KEY (CAR_NUM)
);

CREATE TABLE TB_CAR_BOOKING (
	CAR_NUM VARCHAR2(255) NOT NULL,
	CAR_RECIEVE_PLACE VARCHAR2(255) NOT NULL,
	CAR_RETURN_PLACE VARCHAR2(255) NOT NULL,
	CAR_TIME_START DATE NOT NULL,
	CAR_TIME_OVER DATE NOT NULL,
	CAR_USER VARCHAR2(255) NOT NULL,
	PRIMARY KEY (CAR_NUM)
);

CREATE TABLE TB_CATEGORY (
	AC_NAME VARCHAR2(255) NOT NULL,
	CATEGORY VARCHAR2(255) NOT NULL,
	PRIMARY KEY (AC_NAME, CATEGORY)
);

INSERT INTO TB_MEMBER (USER_ID, USER_PWD, USER_NAME, EMAIL, TEL, BIRTHDAY, GENDER, ENROLL_DATE, MODIFY_DATE, STATUS)
VALUES ('user01', '1234', '김창식', 'user1@example.com', '010-1234-5678', '1990-01-01', 'M', SYSDATE, SYSDATE, 'Y');
INSERT INTO TB_MEMBER (USER_ID, USER_PWD, USER_NAME, EMAIL, TEL, BIRTHDAY, GENDER, ENROLL_DATE, MODIFY_DATE, STATUS)
VALUES ('user02', '1234', '나창식', 'user2@example.com', '010-3456-5678', '1990-02-02', 'F', SYSDATE, SYSDATE, 'Y');
INSERT INTO TB_MEMBER (USER_ID, USER_PWD, USER_NAME, EMAIL, TEL, BIRTHDAY, GENDER, ENROLL_DATE, MODIFY_DATE, STATUS)
VALUES ('user03', '1234', '박창식', 'user3@example.com', '010-5678-5678', '1990-03-03', 'M', SYSDATE, SYSDATE, 'Y');

-- TB_ROOM 테이블에 데이터 삽입
-- 방 번호 1, 2, 3에 각각 다른 방 정보를 추가
INSERT INTO TB_ROOM (ROOM_NUM, ROOM_MAX, ROOM_NAME, ROOM_PRICE, CHECKIN, CHECKOUT, ROOM_INFO, BU_ID)
VALUES (1, 2, '오션뷰 스위트', 150000, '14:00', '12:00', '넓은 오션뷰 객실', 'B001');
INSERT INTO TB_ROOM (ROOM_NUM, ROOM_MAX, ROOM_NAME, ROOM_PRICE, CHECKIN, CHECKOUT, ROOM_INFO, BU_ID)
VALUES (2, 3, '산장', 120000, '15:00', '11:00', '아늑한 산장', 'B002');
INSERT INTO TB_ROOM (ROOM_NUM, ROOM_MAX, ROOM_NAME, ROOM_PRICE, CHECKIN, CHECKOUT, ROOM_INFO, BU_ID)
VALUES (3, 4, '럭셔리 빌라', 250000, '13:00', '11:00', '개인 수영장이 있는 럭셔리 빌라', 'B003');

-- TB_ROOM_BOOKING 테이블에 데이터 삽입
-- 예약 번호 3건에 대해 각각 다른 예약 정보를 추가
INSERT INTO TB_ROOM_BOOKING (BOOKING_NUM, ROOM_NUM, ROOM_USER, CHECKIN, CHECKOUT, STATUS, PAYMENT, PRICE, FIELD10)
VALUES ('BKG001', 1, 'user01', TO_DATE('2024-09-20', 'YYYY-MM-DD'), TO_DATE('2024-09-22', 'YYYY-MM-DD'), 1, '카드', '150000', '메모');
INSERT INTO TB_ROOM_BOOKING (BOOKING_NUM, ROOM_NUM, ROOM_USER, CHECKIN, CHECKOUT, STATUS, PAYMENT, PRICE, FIELD10)
VALUES ('BKG002', 2, 'user02', TO_DATE('2024-09-23', 'YYYY-MM-DD'), TO_DATE('2024-09-24', 'YYYY-MM-DD'), 1, '현금', '120000', '메모');
INSERT INTO TB_ROOM_BOOKING (BOOKING_NUM, ROOM_NUM, ROOM_USER, CHECKIN, CHECKOUT, STATUS, PAYMENT, PRICE, FIELD10)
VALUES ('BKG003', 3, 'user03', TO_DATE('2024-09-25', 'YYYY-MM-DD'), TO_DATE('2024-09-27', 'YYYY-MM-DD'), 2, '카드', '250000', '메모');

-- TB_BUSINESS 테이블에 데이터 삽입
-- 사업체 3개의 정보를 추가
INSERT INTO TB_BUSINESS (BU_ID, BU_PWD, EMAIL, BU_TEL, BU_ADDRESS, BU_TITLE, ENROLL_DATE, MODIFY_DATE)
VALUES ('B001', '1234', 'business1@example.com', '010-1234-5678', '서울시 강남구', '호텔 오션뷰', SYSDATE, SYSDATE);
INSERT INTO TB_BUSINESS (BU_ID, BU_PWD, EMAIL, BU_TEL, BU_ADDRESS, BU_TITLE, ENROLL_DATE, MODIFY_DATE)
VALUES ('B002', '1234', 'business2@example.com', '010-2345-6789', '서울시 서초구', '산장 리조트', SYSDATE, SYSDATE);
INSERT INTO TB_BUSINESS (BU_ID, BU_PWD, EMAIL, BU_TEL, BU_ADDRESS, BU_TITLE, ENROLL_DATE, MODIFY_DATE)
VALUES ('B003', '1234','business3@example.com', '010-3456-7890', '서울시 종로구', '럭셔리 빌라', SYSDATE, SYSDATE);

-- TB_PICTURE 테이블에 데이터 삽입
-- 각 사진의 위치와 관련된 방 또는 사업체 정보를 추가
INSERT INTO TB_PICTURE (LOCATION, ROOM_NUM, BU_ID)
VALUES ('/images/oceanview.jpg', 1, 'B001');
INSERT INTO TB_PICTURE (LOCATION, ROOM_NUM, BU_ID)
VALUES ('/images/mountain.jpg', 2, 'B002');
INSERT INTO TB_PICTURE (LOCATION, ROOM_NUM, BU_ID)
VALUES ('/images/villa.jpg', 3, 'B003');

-- TB_REVIEW 테이블에 데이터 삽입
-- 각 투어에 대한 리뷰 3건을 추가
INSERT INTO TB_REVIEW (REV_NUM, REV_USER, AC_NAME, CONTENT, REVIEW_DATE, SCORE)
VALUES (1, 'user01', '오션뷰 투어', '정말 멋진 여행이었어요!', TO_DATE('2024-09-10', 'YYYY-MM-DD'), 5);
INSERT INTO TB_REVIEW (REV_NUM, REV_USER, AC_NAME, CONTENT, REVIEW_DATE, SCORE)
VALUES (2, 'user02', '산장 투어', '자연이 너무 아름다웠어요.', TO_DATE('2024-09-12', 'YYYY-MM-DD'), 4);
INSERT INTO TB_REVIEW (REV_NUM, REV_USER, AC_NAME, CONTENT, REVIEW_DATE, SCORE)
VALUES (3, 'user03', '럭셔리 빌라 투어', '최고의 서비스였어요!', TO_DATE('2024-09-15', 'YYYY-MM-DD'), 5);

-- TB_TOUR_PICTURE 테이블에 데이터 삽입
-- 투어와 관련된 사진 정보 3건 추가
INSERT INTO TB_TOUR_PICTURE (LOCATION, AC_NAME)
VALUES ('/tour/ocean.jpg', '오션뷰 투어');
INSERT INTO TB_TOUR_PICTURE (LOCATION, AC_NAME)
VALUES ('/tour/mountain.jpg', '산장 투어');
INSERT INTO TB_TOUR_PICTURE (LOCATION, AC_NAME)
VALUES ('/tour/villa.jpg', '럭셔리 빌라 투어');

-- TB_TOUR 테이블에 데이터 삽입
-- 3개의 투어 정보를 추가
INSERT INTO TB_TOUR (AC_NAME, AC_ADDRESS, TR_INFO, ACT_ID, FIELD)
VALUES ('오션뷰 투어', '제주도 서귀포시', '바다를 보며 즐기는 투어', '축제', 1);
INSERT INTO TB_TOUR (AC_NAME, AC_ADDRESS, TR_INFO, ACT_ID, FIELD)
VALUES ('산장 투어', '강원도 평창군', '산 속에서 힐링하는 투어', '여행지', 2);
INSERT INTO TB_TOUR (AC_NAME, AC_ADDRESS, TR_INFO, ACT_ID, FIELD)
VALUES ('럭셔리 빌라 투어', '경기도 가평군', '럭셔리한 휴양을 즐기는 투어', '맛집', 3);

-- TB_WISHLIST 테이블에 데이터 삽입
-- 3명의 사용자가 관심있는 투어를 추가
INSERT INTO TB_WISHLIST (AC_NAME, WISH_USER)
VALUES ('오션뷰 투어', 'user01');
INSERT INTO TB_WISHLIST (AC_NAME, WISH_USER)
VALUES ('산장 투어', 'user02');
INSERT INTO TB_WISHLIST (AC_NAME, WISH_USER)
VALUES ('럭셔리 빌라 투어', 'user03');

-- TB_RENTCAR 테이블에 데이터 삽입
-- 렌트카 정보 3건 추가
INSERT INTO TB_RENTCAR (CAR_NUM, CAR_ID, CAR_NAME, CAR_PRICE, CAR_INFO)
VALUES ('CAR001', 'R001', '쏘나타', 70000, '준중형 세단');
INSERT INTO TB_RENTCAR (CAR_NUM, CAR_ID, CAR_NAME, CAR_PRICE, CAR_INFO)
VALUES ('CAR002', 'R002', '카니발', 120000, '대형 밴');
INSERT INTO TB_RENTCAR (CAR_NUM, CAR_ID, CAR_NAME, CAR_PRICE, CAR_INFO)
VALUES ('CAR003', 'R003', '아반떼', 60000, '소형 세단');

-- TB_CAR_BOOKING 테이블에 데이터 삽입
-- 렌트카 예약 정보 3건 추가
INSERT INTO TB_CAR_BOOKING (CAR_NUM, CAR_RECIEVE_PLACE, CAR_RETURN_PLACE, CAR_TIME_START, CAR_TIME_OVER, CAR_USER)
VALUES ('CAR001', '제주공항', '제주공항', TO_DATE('2024-09-20', 'YYYY-MM-DD'), TO_DATE('2024-09-22', 'YYYY-MM-DD'), 'user01');
INSERT INTO TB_CAR_BOOKING (CAR_NUM, CAR_RECIEVE_PLACE, CAR_RETURN_PLACE, CAR_TIME_START, CAR_TIME_OVER, CAR_USER)
VALUES ('CAR002', '서울역', '서울역', TO_DATE('2024-09-23', 'YYYY-MM-DD'), TO_DATE('2024-09-25', 'YYYY-MM-DD'), 'user02');
INSERT INTO TB_CAR_BOOKING (CAR_NUM, CAR_RECIEVE_PLACE, CAR_RETURN_PLACE, CAR_TIME_START, CAR_TIME_OVER, CAR_USER)
VALUES ('CAR003', '김포공항', '김포공항', TO_DATE('2024-09-26', 'YYYY-MM-DD'), TO_DATE('2024-09-28', 'YYYY-MM-DD'), 'user03');

-- TB_CATEGORY 테이블에 데이터 삽입
-- 투어 카테고리 정보 3건 추가
INSERT INTO TB_CATEGORY (AC_NAME, CATEGORY)
VALUES ('오션뷰 투어', '자연');
INSERT INTO TB_CATEGORY (AC_NAME, CATEGORY)
VALUES ('산장 투어', '힐링');
INSERT INTO TB_CATEGORY (AC_NAME, CATEGORY)
VALUES ('럭셔리 빌라 투어', '럭셔리');

--TOUR 정보 입력
INSERT INTO TB_TOUR (AC_NAME, AC_ADDRESS, TR_INFO, ACT_ID, FIELD) VALUES ('곤지암리조트','경기도 광주시 도척면 도척윗로 278-1','곤지암리조트는 다양한 스타일의 부티크 호텔형 객실을 갖춘 콘도, 경기도 최대 규모의 스키장, 국내 최초로 선보이는 체류형 스파, 건강과 문화 중심의 차별화된 프로그램 등의 다양하고 독특한 시설을 갖춘 사계절 종합리조트이다. 중부고속도로 곤지암 IC에서 4Km 거리에 위치해 서울 강남에서 불과 40분 만에 도착한다는 점이 가장 큰 매력이기도 하다. 라스베이거스 시저스 팰리스(미국), The Palace of the Lost City(남아공), 제주 롯데호텔 등 리조트 디자인 분야에서 탁월함을 인정받고 있는 WAT&G(Wimberly Allison Tong & Goo)가 설계한 곤지암리조트는 북미 스타일의 이국적이고 차별화된 분위기를 느낄 수 있다.','액티비티',1);
INSERT INTO TB_TOUR (AC_NAME, AC_ADDRESS, TR_INFO, ACT_ID, FIELD) VALUES ('마당','경기도 광주시 신현로 21','마당은 경기도 광주 오포읍 신현리 태재고개 근처에 있는 함흥냉면 전문점이다. 넓은 잔디정원 앞으로 넓은 주차장이 있어 편하게 주차를 할 수 있다. 이곳은 한옥을 개조한 식당으로 정원을 걸어 들어가면 정면에 카페가 있고 왼쪽에 건물이 식당이다. 내부는 한옥의 멋을 그대로 살린 서까래가 노출되어 있어 답답함 없이 깔끔하고 넓으며 테이블이 정갈하게 정렬되어 있다. 정원 한쪽에 대기 손님을 위한 대기 공간이 있지만 회전율이 높아 오래 기다리지 않아도 된다. 또한 당일 식사 영수증을 지참하면 식당 옆 카페에서 음료를 할인 받을 수 있다.','맛집',1);
INSERT INTO TB_TOUR (AC_NAME, AC_ADDRESS, TR_INFO, ACT_ID, FIELD) VALUES ('경기광주 한옥마을','경기도 광주시 새오개길 39 (목현동)','400년이 넘은 충남 광천의 사대부 한옥을 그대로 옮겨 복원시켰다. 1000년 수령의 느티나무와 소나무들이 한옥과 어우러져 계절마다 새로운 옷을 갈아입는다. 수려한 자연 속에서 한옥의 고즈넉한 정취를 느끼며 삶의 여유를 느껴볼 수 있다. 아웃도어 바비큐, 원데이 클래스 문화강좌, 카페, 한옥스테이, 아기 돌 촬영 스튜디오 등가족, 자연 그리고 예술에 근간을 둔 프로그램을 운영 중이다.','여행지',1);


-- ALTER TABLE Statements (Constraints)
ALTER TABLE TB_ROOM ADD CONSTRAINT FK_TB_BUSINESS_TO_TB_ROOM FOREIGN KEY (BU_ID) REFERENCES TB_BUSINESS (BU_ID);

ALTER TABLE TB_ROOM_BOOKING ADD CONSTRAINT FK_TB_ROOM_TO_TB_ROOM_BOOKING FOREIGN KEY (ROOM_NUM) REFERENCES TB_ROOM (ROOM_NUM);
ALTER TABLE TB_ROOM_BOOKING ADD CONSTRAINT FK_TB_MEMBER_TO_TB_ROOM_BOOKING FOREIGN KEY (ROOM_USER) REFERENCES TB_MEMBER (USER_ID);

ALTER TABLE TB_PICTURE ADD CONSTRAINT FK_TB_ROOM_TO_TB_PICTURE FOREIGN KEY (ROOM_NUM) REFERENCES TB_ROOM (ROOM_NUM);
ALTER TABLE TB_PICTURE ADD CONSTRAINT FK_TB_BUSINESS_TO_TB_PICTURE FOREIGN KEY (BU_ID) REFERENCES TB_BUSINESS (BU_ID);

ALTER TABLE TB_REVIEW ADD CONSTRAINT FK_TB_MEMBER_TO_TB_REVIEW FOREIGN KEY (REV_USER) REFERENCES TB_MEMBER (USER_ID);
ALTER TABLE TB_REVIEW ADD CONSTRAINT FK_TB_TOUR_TO_TB_REVIEW FOREIGN KEY (AC_NAME) REFERENCES TB_TOUR (AC_NAME);

ALTER TABLE TB_TOUR_PICTURE ADD CONSTRAINT FK_TB_TOUR_TO_TB_TOUR_PICTURE FOREIGN KEY (AC_NAME) REFERENCES TB_TOUR (AC_NAME);

ALTER TABLE TB_WISHLIST ADD CONSTRAINT FK_TB_TOUR_TO_TB_WISHLIST FOREIGN KEY (AC_NAME) REFERENCES TB_TOUR (AC_NAME);
ALTER TABLE TB_WISHLIST ADD CONSTRAINT FK_TB_MEMBER_TO_TB_WISHLIST FOREIGN KEY (WISH_USER) REFERENCES TB_MEMBER (USER_ID);

ALTER TABLE TB_CAR_BOOKING ADD CONSTRAINT FK_TB_RENTCAR_TO_TB_CAR_BOOKING FOREIGN KEY (CAR_NUM) REFERENCES TB_RENTCAR (CAR_NUM);
ALTER TABLE TB_CAR_BOOKING ADD CONSTRAINT FK_TB_MEMBER_TO_TB_CAR_BOOKING FOREIGN KEY (CAR_USER) REFERENCES TB_MEMBER (USER_ID);

ALTER TABLE TB_CATEGORY ADD CONSTRAINT FK_TB_TOUR_TO_TB_CATEGORY FOREIGN KEY (AC_NAME) REFERENCES TB_TOUR (AC_NAME);

ALTER TABLE TB_TOUR
ADD CONSTRAINT CHK_TB_TOUR_ACT_ID
CHECK (ACT_ID IN ('맛집', '축제', '여행지', '액티비티'));

ALTER TABLE TB_MEMBER
ADD CONSTRAINT CHK_TB_MEMBER_STATUS
CHECK (STATUS IN('Y','N'));

ALTER TABLE TB_BUSINESS
ADD CONSTRAINT CHK_TB_BUSINESS_STATUS
CHECK (STATUS IN('Y','N'));